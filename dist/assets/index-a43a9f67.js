var b=Object.defineProperty;var D=(n,t,e)=>t in n?b(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var r=(n,t,e)=>(D(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();function M(){let n=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",n+"px")}window.addEventListener("DOMContentLoaded",M);window.addEventListener("resize",M);window.addEventListener("orientationchange",M);class w{constructor(t,e,o){r(this,"r",0);r(this,"g",0);r(this,"b",0);r(this,"fillStyle","");this.r=t,this.g=e,this.b=o,this.fillStyle="rgb("+t+","+e+","+o+")"}}class x{constructor(t,e,o){r(this,"agents",[]);r(this,"size",1);r(this,"width",1);r(this,"height",1);r(this,"iterator",0);r(this,"restitution",.9);this.agents=[],this.size=t,this.width=e,this.height=o,this.iterator=0,this.restitution=.9}Start(){let t=[],e=Math.floor(Math.random()*5)+2;for(let o=0;o<e;o++){let s=Math.floor(Math.random()*255),i=Math.floor(Math.random()*255),l=Math.floor(Math.random()*255),a=new w(s,i,l);t.push(a)}this.agents.length=0;for(let o=0;o<this.size;o++){let s=Math.floor(Math.random()*this.width),i=Math.floor(Math.random()*this.height),l=Math.floor(Math.random()*5),a=Math.floor(Math.random()*5);Math.random()>.5&&(l=-l),Math.random()>.5&&(a=-a);let u=Math.floor(Math.random()*t.length),c=Math.floor(Math.random()*40)+10,d=c/2,m=new E(o,d,s,i,l,a,c,t[u]);this.agents.push(m)}this.DrawGroup()}Iterate(){this.iterator===0&&(this.iterator=setInterval(()=>{this.Update()},16))}Pause(){clearInterval(this.iterator),this.iterator=0}Toggle(){this.iterator===0?this.Iterate():this.Pause()}Update(){for(let t=0;t<this.agents.length;t++)this.MovePosition(this.agents[t]),this.agents[t].isColliding=!1;this.DetectCollisions(),this.DetectEdgeCollisions(),this.DrawGroup()}MovePosition(t){t.x+=t.vx,t.y+=t.vy}DetectCollisions(){let t,e;for(let o=0;o<this.agents.length;o++){t=this.agents[o];for(let s=0;s<this.agents.length;s++)if(s!=o&&(e=this.agents[s],this.CircleIntersect(t.x,t.y,t.radius,e.x,e.y,e.radius))){t.isColliding=!0,e.isColliding=!0,Math.random()>.5?t.colour=e.colour:e.colour=t.colour;let i={x:e.x-t.x,y:e.y-t.y},l=Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)),a={x:i.x/l,y:i.y/l},u={x:t.vx-e.vx,y:t.vy-e.vy},c=u.x*a.x+u.y*a.y;if(c*=Math.min(t.restitution,e.restitution),c<0)break;let d=2*c/(t.mass+e.mass);t.vx-=d*e.mass*a.x,t.vy-=d*e.mass*a.y,e.vx+=d*t.mass*a.x,e.vy+=d*t.mass*a.y}}}CircleIntersect(t,e,o,s,i,l){return(t-s)*(t-s)+(e-i)*(e-i)<=(o+l)*(o+l)}DetectEdgeCollisions(){let t;for(let e=0;e<this.agents.length;e++)t=this.agents[e],t.x<t.radius?(t.vx=Math.abs(t.vx)*this.restitution,t.x=t.radius):t.x>this.width-t.radius&&(t.vx=-Math.abs(t.vx)*this.restitution,t.x=this.width-t.radius),t.y<t.radius?(t.vy=Math.abs(t.vy)*this.restitution,t.y=t.radius):t.y>this.height-t.radius&&(t.vy=-Math.abs(t.vy)*this.restitution,t.y=this.height-t.radius)}DrawGroup(){y.clearRect(0,0,this.width,this.height);for(let t=0;t<this.agents.length;t++)y.fillStyle!=this.agents[t].colour.fillStyle&&(y.fillStyle=this.agents[t].colour.fillStyle),y.beginPath(),y.arc(this.agents[t].x,this.agents[t].y,this.agents[t].radius,0,2*Math.PI),y.fill()}Click(t,e){let o=50;for(let s=0;s<this.agents.length;s++){let i=this.agents[s];if(this.CircleIntersect(t,e,o,i.x,i.y,i.radius)){let l={x:i.x-t,y:i.y-e},a=Math.sqrt((i.x-t)*(i.x-t)+(i.y-e)*(i.y-e)),u={x:l.x/a,y:l.y/a},c={x:-i.vx*10-i.vx,y:-i.vy*10-i.vy},d=c.x*u.x+c.y*u.y;if(d*=i.restitution,d<=0){let g=Math.floor(Math.random()*25)+5;Math.random()<.25?(i.vx+=g,i.vy+=g):Math.random()>=.25&&Math.random()<.5?(i.vx-=g,i.vy+=g):Math.random()>=.5&&Math.random()<.75?(i.vx+=g,i.vy-=g):Math.random()>=.75&&(i.vx-=g,i.vy-=g)}let m=2*d/(50+i.mass);i.vx+=m*50*u.x,i.vy+=m*50*u.y}}}}class E{constructor(t,e,o,s,i,l,a,u){r(this,"index",0);r(this,"radius",0);r(this,"x",0);r(this,"y",0);r(this,"vx",0);r(this,"vy",0);r(this,"mass",0);r(this,"colour",new w(0,0,0));r(this,"isColliding",!1);r(this,"restitution",.9);this.index=t,this.radius=e,this.x=o,this.y=s,this.vx=i,this.vy=l,this.isColliding=!1,this.colour=u,this.mass=a,this.restitution=.9}}const I=document.getElementById("playPauseButton"),p=document.getElementById("playPauseButtonSource"),B=document.getElementById("resetButton"),v=document.getElementById("gameDiv"),f=document.getElementById("gameCanvas"),y=f.getContext("2d");I.onclick=function(){L()};B.onclick=function(){C()};let h=new x(0,0,0);function C(){P(),p.src="./play.svg";let n=f.width,t=f.height,e=Math.floor(Math.random()*145)+5;h!=null&&(h.Pause(),h=new x(0,0,0)),h=new x(e,n,t),h.Start(),h.Pause()}function L(){h.Toggle(),h.iterator===0?p.src="./play.svg":p.src="./pause.svg"}function P(){v.style.width=window.innerWidth+"px",v.style.height=window.innerHeight*.925+"px",f.width=window.innerWidth,f.height=window.innerHeight*.925,h!=null&&(h.width=v.scrollWidth,h.height=v.scrollHeight,h.DrawGroup())}f.onmousedown=function(n){n.preventDefault();let t=f.getBoundingClientRect(),e=n.clientX-t.left,o=n.clientY-t.top;h!=null&&h.Click(e,o)};f.ontouchstart=function(n){if(n.preventDefault(),n.touches!=null){let t=f.getBoundingClientRect(),e=n.touches[0]||n.changedTouches[0],o=e.pageX-t.left,s=e.pageY-t.top;h!=null&&h.Click(o,s)}};window.addEventListener("resize",P);document.addEventListener("DOMContentLoaded",C);
